/*!
 * @yama-dev/js-modal-module
 * version 0.10.2
 * repository https://github.com/yama-dev/js-modal-module
 * copyright yama-dev
 * licensed MIT
 */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var o in n)("object"==typeof exports?exports:t)[o]=n[o]}}(window,(function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function o(t){try{return t instanceof HTMLElement}catch(t){return!1}}function i(t){if(!t)return!1;var e;if(!Array.isArray(t)&&!t.length||function(t){try{return"string"==typeof t}catch(t){return!1}}(t))e=o(t)?Array(t):Array.prototype.slice.call(document.querySelectorAll(t));else{if(!o(t[0]))return!1;e=Array.prototype.slice.call(t)}return 0===e.length&&(e=null),e}function a(t,e){var n=i(t);if(!n)return!1;n.map((function(t){t.classList.add(e)}))}function l(t,e){var n=i(t);if(!n)return!1;n.map((function(t){t.classList.remove(e)}))}function s(t,e,n){if(t===window)window.addEventListener(e,n,{passive:!1});else{var o=i(t);if(!o)return!1;o.map((function(t){t.addEventListener(e,n,{passive:!1})}))}}function r(t,e,n){if(t===window)window.removeEventListener(e,n);else{var o=i(t);if(!o)return!1;o.map((function(t){t.removeEventListener(e,n)}))}}function d(t,e){var n=i(t);if(!n)return!1;n.map((function(t){t.innerHTML=e}))}function m(t,e){var n=i(t);if(!n)return!1;n.map((function(t){var n="";Object.keys(e).forEach((function(t){null!==e[t]&&(n+=t.replace(/([A-Z])/g,"-$1").toLowerCase()+": "+e[t]+";")})),t.setAttribute("style",n)}))}function u(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t)return!1;for(var o in e){new RegExp("({{.?"+o+".?}})","g");var i=new RegExp("{{.?("+o+").?}}","g");t.match(i);var a=RegExp.$1;t=t.replace(i,e[a])}n&&(t=t.replace(/({{.*}})/g,""));return t}n.r(e),n.d(e,"MODAL_MODULE",(function(){return g}));var c='\n<style id="{{ id }}-style" data-modal-type>\nbody.is-modal-open,\nbody.is-modal-overflow {\n  overflow: hidden;\n}\ntemplate {\n  display: none;\n}\n.m-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: {{ zIndex }};\n\n  width: 100%;\n  height: 100%;\n\n  overflow: auto;\n\n  visibility: hidden;\n  -ms-touch-action: none;\n  touch-action: none;\n  pointer-events: none;\n\n  opacity: 0;\n  -webkit-transition: all {{ duration }}ms cubic-bezier(.215, .61, .355, 1) 0s;\n  transition: all {{ duration }}ms cubic-bezier(.215, .61, .355, 1) 0s;\n}\n.m-modal.is-open,\n.m-modal.is-load-start {\n  opacity: 1;\n\n  visibility: visible;\n  -ms-touch-action: auto;\n  touch-action: auto;\n  pointer-events: auto;\n}\n.m-modal.is-open {\n  -webkit-transition: all {{ duration }}ms cubic-bezier(.215, .61, .355, 1) 0s;\n  transition: all {{ duration }}ms cubic-bezier(.215, .61, .355, 1) 0s;\n}\n.m-modal.is-load-start {\n  -webkit-transition: all 0s cubic-bezier(.215, .61, .355, 1) 0s;\n  transition: all 0s cubic-bezier(.215, .61, .355, 1) 0s;\n}\n.m-modal.is-close {\n  visibility: hidden;\n  -ms-touch-action: none;\n  touch-action: none;\n  pointer-events: none;\n\n  opacity: 0;\n  -webkit-transition: all {{ duration }}ms cubic-bezier(.215, .61, .355, 1) 0s;\n  transition: all {{ duration }}ms cubic-bezier(.215, .61, .355, 1) 0s;\n}\n\n.m-modal .m-modal__bg {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.8);\n  cursor: pointer;\n}\n.is-modal-overflow .m-modal .m-modal__bg {\n  position: absolute;\n}\n.m-modal .m-modal__content {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 80%;\n  max-width: 1200px;\n  min-width: 500px;\n  height: auto;\n  text-align: center;\n}\n.is-modal-overflow-prep .m-modal .m-modal__content {\n  position: relative;\n  top: auto;\n  left: auto;\n  -webkit-transform: translate(0, 0);\n          transform: translate(0, 0);\n  margin: 50px auto;\n}\n.m-modal .m-modal__content > * {\n  width: 100%;\n  height: auto;\n}\n.m-modal .m-modal__content > * img {\n  backface-visibility: hidden;\n}\n.m-modal .m-modal__close-btn {\n  position: absolute;\n  top: -80px;\n  right: -80px;\n  width: 80px;\n  height: 80px;\n  cursor: pointer;\n}\n.m-modal .m-modal__close-btn::before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 50%;\n  -webkit-transform: rotate(-45deg);\n          transform: rotate(-45deg);\n  background-color: #fff;\n  width: 1px;\n  height: 80px;\n}\n.m-modal .m-modal__close-btn::after {\n  content: "";\n  position: absolute;\n  top: 0px;\n  left: 50%;\n  -webkit-transform: rotate(45deg);\n          transform: rotate(45deg);\n  background-color: #fff;\n  width: 1px;\n  height: 80px;\n}\n\n@media screen and (max-height: 900px) {\n  .m-modal .m-modal__content {\n    max-width: 900px;\n  }\n}\n@media screen and (max-height: 800px) {\n  .m-modal .m-modal__content {\n    max-width: 800px;\n  }\n}\n@media screen and (max-height: 700px) {\n  .m-modal .m-modal__content {\n    max-width: 700px;\n  }\n}\n@media screen and (max-height: 600px) {\n  .m-modal .m-modal__content {\n    max-width: 600px;\n  }\n}\n\n@media screen and (max-width: 767px) {\n  .m-modal .m-modal__content {\n    width: 96%;\n    min-width: 0;\n  }\n  .m-modal .m-modal__content .m-modal__content-btn {\n    position: relative;\n    top: auto;\n    right: auto;\n    width: 84%;\n    height: auto;\n    margin: 20px auto 0;\n  }\n}\n\n@media screen and (min-width: 768px) {\n  .m-modal .is-pc { display: block; }\n  .m-modal .is-sp { display: none; }\n}\n@media screen and (max-width: 767px) {\n  .m-modal .is-pc { display: none; }\n  .m-modal .is-sp { display: block; }\n}\n{{ custom_style }}\n</style>\n';function h(){return(h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var g=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,t);var o={id:"jmm-"+Date.now(),elem:null,elemContentId:null,elemOutputSelector:"body",elemContent:".m-modal__content",elemBg:".m-modal__bg",elemClose:"[data-modal-ui-close]",elemBtn:"[data-modal]",elemYoutubePlayerId:null,elemYoutubePlayerAspectRatio:"16:9",movie:{youtube:{height:"360",width:"640",playerVars:{autoplay:1,playsinline:1,controls:1,disablekb:0,fs:1,loop:0,rel:0}}},defaultClassName:"",duration:500,zIndex:100,removeWrapperTag:!1,defaultModalStyle:!0,customModalHtml:null,customModalStyle:null,loadStart:!1,on:{init:null,prepOpen:null,beforeOpen:null,afterOpen:null,prepClose:null,beforeClose:null,afterClose:null}};this.Elem={modal:null,modalContent:null,modalBg:null,modalClose:null,modalBtns:null},this.State={data:null,elemOpen:null,elemOpenHtml:"",elemOpenType:"",flg:!0},this.Events=[],this.Config=h(o,n),this.Config.elem="#".concat(this.Config.id),this.Config.elemContentId="#".concat(this.Config.id,"__content"),this.Config.elemYoutubePlayerId="".concat(this.Config.id,"__youtube"),this.Config.loadStart&&(this.Config.defaultClassName+=" is-load-start"),this.Html="",this.Player=null,this.Html=this._makeModalHtml(),document.querySelector("body")&&this.Config.loadStart&&this._render(),"complete"==document.readyState||"interactive"==document.readyState?(this.Config.loadStart||this._render(),this._attachEvent(),this.onInit()):(document.addEventListener("DOMContentLoaded",(function(){e.Config.loadStart||e._render(),e._attachEvent(),e.onInit()})),window.addEventListener("load",(function(){e._updateSize()})))}var e,n,o;return e=t,o=[{key:"outerHeight",value:function(t){var e=(t=document.querySelector(t)).offsetHeight,n=getComputedStyle(t);return e+=parseInt(n.marginTop)+parseInt(n.marginBottom)}}],(n=[{key:"_makeModalHtml",value:function(){var t,e="";if(this.Config.customModalHtml){if("function"==typeof this.Config.customModalHtml){var n=this.State.data?this.State.data.match(/^([^:]+):(.+)/):null;t=this.Config.customModalHtml(n?n[1]:this.State.data,n?n[2]:this.State.data,n||null,this.State.elemOpen,this.Elem)}else t=this.Config.customModalHtml;if(/\{\{\s{0,2}contentStart\s{0,1}\}\}/.test(t)&&/\{\{\s{0,2}contentEnd\s{0,1}\}\}/.test(t))e+=u(t,{id:this.Config.id,zIndex:this.Config.zIndex,duration:this.Config.duration,contentStart:'<div id="'.concat(this.Config.id,'__content">'),contentEnd:"</div>",defaultClassName:this.Config.defaultClassName});else{if(!/\{\{\s{0,2}content\s{0,1}\}\}/.test(t))throw new Error("Not Found {{ content || contentStart || contentEnd }}.");e+=u(t,{id:this.Config.id,zIndex:this.Config.zIndex,duration:this.Config.duration,content:'<div id="'.concat(this.Config.id,'__content"></div>'),defaultClassName:this.Config.defaultClassName})}}else e+=u('\n<section class="m-modal {{ defaultClassName }}" id="{{ id }}" data-modal-type>\n  <div class="m-modal__bg"></div>\n  <div class="m-modal__content">\n    {{ content }}\n    <div class="m-modal__close-btn" data-modal-ui-close></div>\n  </div>\n</section>',{id:this.Config.id,zIndex:this.Config.zIndex,duration:this.Config.duration,content:'<div id="'.concat(this.Config.id,'__content"></div>'),defaultClassName:this.Config.defaultClassName});var o="";return this.Config.defaultModalStyle?(o=this.Config.customModalStyle?u(c,{id:this.Config.id,zIndex:this.Config.zIndex,duration:this.Config.duration,defaultClassName:this.Config.defaultClassName,custom_style:this.Config.customModalStyle}):c,e+=u(o,{id:this.Config.id,zIndex:this.Config.zIndex,defaultClassName:this.Config.defaultClassName,duration:this.Config.duration})):this.Config.customModalStyle&&(e+=u(this.Config.customModalStyle,{id:this.Config.id,zIndex:this.Config.zIndex,defaultClassName:this.Config.defaultClassName,duration:this.Config.duration})),e}},{key:"_updateDom",value:function(){this.Elem.modal=i(this.Config.elem),this.Elem.modalBg=i(this.Config.elemBg),this.Elem.modalClose=i(this.Config.elemClose),this.Elem.modalBtns=i(this.Config.elemBtn)}},{key:"_updateSize",value:function(){this.State.win_w=window.innerWidth,this.State.win_h=window.innerHeight}},{key:"_render",value:function(){document.querySelector(this.Config.elemOutputSelector).insertAdjacentHTML("beforeend",this.Html)}},{key:"_attachEvent",value:function(){var t=this;if(this._updateDom(),this._updateSize(),!this.Elem.modal)throw new Error("Not Found Modal Element.");if(!this.Elem.modalBg)throw new Error("Not Found ModalBg Element.");if(!this.Elem.modalBtns)return!1;this.Events.modalOpen=[],i(this.Elem.modalBtns).map((function(e,n){t.Events.modalOpen.push((function(e){var n=e.currentTarget.getAttribute(t.Config.elemBtn.replace(/(\[|\])/g,""));t.Open(n,e.currentTarget)})),s(e,"click",t.Events.modalOpen[n])}))}},{key:"_detachEvent",value:function(){var t=this,e=i(this.Elem.modalBtns);e&&e.map((function(e,n){r(e,"click",t.Events.modalOpen[n])})),this.Events.modalOpen=[]}},{key:"_setContent",value:function(t){d("".concat(this.Config.elem," ").concat(this.Config.elemContentId),t)}},{key:"_updateModalSize",value:function(){var e=document.querySelector("".concat(this.Config.elem," ").concat(this.Config.elemContentId)).clientHeight;if(e>=this.State.win_h){a(document.body,"is-modal-overflow-prep"),a(document.body,"is-modal-overflow"),m("".concat(this.Config.elem," ").concat(this.Config.elemContent),{height:"".concat(e,"px")});var n=t.outerHeight("".concat(this.Config.elem," ").concat(this.Config.elemContent));m("".concat(this.Config.elem," ").concat(this.Config.elemBg),{height:"".concat(n,"px")})}else a(document.body,"is-modal-overflow-prep"),l(document.body,"is-modal-overflow-prep"),l(document.body,"is-modal-overflow"),m("".concat(this.Config.elem," ").concat(this.Config.elemBg),{height:""}),m("".concat(this.Config.elem," ").concat(this.Config.elemContent),{height:""})}},{key:"_youtube",value:function(t){var e=this,n={height:"360",width:"640",videoId:t,playerVars:{autoplay:1,playsinline:1,rel:0},events:{onReady:function(t){n.playerVars.autoplay&&t.target.playVideo()},onStateChange:function(t){t.data==YT.PlayerState.ENDED&&e.Close()}}};if(n=h(n,this.Config.movie.youtube),window.YT)e.Player=new YT.Player(e.Config.elemYoutubePlayerId,n);else{var o=document.createElement("script");o.src="https://www.youtube.com/iframe_api";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(o,i),o.onload=function(){window.onYouTubeIframeAPIReady=function(){e.Player=new YT.Player(e.Config.elemYoutubePlayerId,n)}}}}},{key:"Open",value:function(t,e){var n=this;if(!t)throw new Error("Not Found Modal data.");if(this.State.elemOpen=e,this.State.elemOpenType="",!this.State.flg)return!1;if(this.State.flg=!1,this.State.data=t,this.State.elemOpenHtml="",this.Html=this._makeModalHtml(),d(this.Config.elem,this.Html),this.Update(),this.onPrepOpen(t,e),a(document.body,"is-modal-open"),a(this.Elem.modal,"is-open"),l(this.Elem.modal,"is-close"),/img:/.test(this.State.data)){var o=this.State.data.match(/d*:(.*)$/)[1];this.State.elemOpenHtml='<img src="'.concat(o,'">'),this.State.elemOpenType="img"}if(/youtube:/.test(this.State.data)){var r=this.Config.elemYoutubePlayerAspectRatio.split(/[/:]/),m=56.25;2==r.length&&(m=Number(r[1])/Number(r[0])*100),this.State.elemOpenHtml='<div id="'.concat(this.Config.elemYoutubePlayerId,'-wrap">\n        <style>\n        #').concat(this.Config.elemYoutubePlayerId,"-wrap {\n          position: relative;\n        }\n        #").concat(this.Config.elemYoutubePlayerId,"-wrap::before {\n          content: '';\n          display: block;\n          width: 100%;\n          padding-top: ").concat(m,"%;\n        }\n        #").concat(this.Config.elemYoutubePlayerId,' {\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n        }\n        </style>\n        <div id="').concat(this.Config.elemYoutubePlayerId,'"></div>\n      </div>'),this.State.elemOpenType="youtube"}if(/^(\.|#)/.test(this.State.data)){var u=this.State.data.match(/(.*)$/)[1];if(!this.State.elemOpen){if(!(i(u).length>=1))throw new Error("Not Found append data.");this.State.elemOpen=document.body}this.State.elemOpen.querySelector(u)?this.Config.removeWrapperTag?this.State.elemOpenHtml=this.State.elemOpen.querySelector(u).innerHTML:this.State.elemOpenHtml=this.State.elemOpen.querySelector(u).outerHTML:this.State.elemOpen.parentNode.querySelector(u)&&(this.Config.removeWrapperTag?this.State.elemOpenHtml=this.State.elemOpen.parentNode.querySelector(u).innerHTML:this.State.elemOpenHtml=this.State.elemOpen.parentNode.querySelector(u).outerHTML),this.State.elemOpenType="element"}if(/^(template)/.test(this.State.data)){var c=this.State.data.match(/(.*)$/)[1];if(!this.State.elemOpen){if(!(i(c).length>=1))throw new Error("Not Found append data.");this.State.elemOpen=document.body}this.State.elemOpen.querySelector(c)?this.State.elemOpenHtml=this.State.elemOpen.querySelector(c).innerHTML:this.State.elemOpen.parentNode.querySelector(c)&&(this.State.elemOpenHtml=this.State.elemOpen.parentNode.querySelector(c).innerHTML),this.State.elemOpenType="template"}if(/^(group:)/.test(this.State.data)){var h=this.State.data.match(/d*:(.*)$/)[1];if(!this.State.elemOpen){if(!(i(h).length>=1))throw new Error("Not Found append data.");this.State.elemOpen=document.body}this.State.elemOpen.parentNode.querySelector(h)&&i(this.State.elemOpen.parentNode.querySelectorAll(h)).map((function(t){n.State.elemOpenHtml+=t.innerHTML})),this.State.elemOpenType="group"}if(this.onBeforeOpen(t,e),this.State.elemOpenHtml&&this._setContent(this.State.elemOpenHtml),"youtube"==this.State.elemOpenType){var f=this.State.data.match(/d*:(.*)$/)[1];this._youtube(f)}this.Elem.modal[0].setAttribute("data-modal-type",this.State.elemOpenType),this.Events.modalBg=function(){n.Close()},this.Events.modalClose=function(){n.Close()},s(this.Elem.modalBg,"click",this.Events.modalBg),s(this.Elem.modalClose,"click",this.Events.modalClose),setTimeout((function(){n.onAfterOpen(t,e)}),this.Config.duration),/<img.*?src\s*=\s*["|'](.*?)["|'].*?>/.test(this.State.elemOpenHtml)?i("".concat(this.Config.elem," ").concat(this.Config.elemContentId," img"))[0].addEventListener("load",(function(){n._updateModalSize()})):this._updateModalSize()}},{key:"Close",value:function(){var t=this;this.onPrepClose(),l(document.body,"is-modal-open"),l(this.Elem.modal,"is-load-start"),l(this.Elem.modal,"is-open"),a(this.Elem.modal,"is-close"),l(document.body,"is-modal-overflow"),this.onBeforeClose(),r(this.Elem.modalBg,"click",this.Events.modalBgClose),r(this.Elem.modalClose,"click",this.Events.modalClose),this.Player&&this.Player.pauseVideo(),setTimeout((function(){t.onAfterClose(),t._setContent("\x3c!-- none --\x3e"),t.Elem.modal[0].setAttribute("data-modal-type",""),l(document.body,"is-modal-overflow-prep"),m("".concat(t.Config.elem," ").concat(t.Config.elemContent),{height:""}),t.State.flg=!0,t.Player&&(t.Player.stopVideo(),t.Player=null)}),this.Config.duration)}},{key:"Update",value:function(){this._detachEvent(),this._attachEvent()}},{key:"onInit",value:function(){this.Config.on.init&&this.Config.on.init()}},{key:"onPrepOpen",value:function(t,e){this.Config.on.prepOpen&&this.Config.on.prepOpen(t,e,this.State,this.Elem)}},{key:"onBeforeOpen",value:function(t,e){this.Config.on.beforeOpen&&this.Config.on.beforeOpen(t,e,this.State,this.Elem)}},{key:"onAfterOpen",value:function(t,e){this.Config.on.afterOpen&&this.Config.on.afterOpen(t,e,this.State,this.Elem)}},{key:"onPrepClose",value:function(){this.Config.on.prepClose&&this.Config.on.prepClose()}},{key:"onBeforeClose",value:function(){this.Config.on.beforeClose&&this.Config.on.beforeClose()}},{key:"onAfterClose",value:function(){this.Config.on.afterClose&&this.Config.on.afterClose()}}])&&p(e.prototype,n),o&&p(e,o),t}()}])}));